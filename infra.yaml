---
  - name: Initial setup
    hosts: all
    roles:
      - init
      - docker
    tags: in

  - name: DNS server
    hosts: dns_servers
    roles:
      - bind
      - bind_exporter
    tags: dns
 
  - name: DNS resolver
    hosts: all
    roles:
      - dnsresolver
    tags: rsv

  - name: Prometheus server
    hosts: prometheus_servers
    roles:
      - prometheus
    tags: pm

  - name: Database server
    hosts: db_servers
    roles:
      - mysql
      - mysql_exporter
    tags: db

  - name: Agama server
    hosts: agama_servers
    roles:
      - agama
     # - uwsgi
    tags: ag

  - name: Grafana server
    hosts: grafana_servers
    roles:
      - grafana
    tags: gf
  
  - name: Web server
    hosts: web_servers
    roles:
      - nginx_exporter
      - nginx
    tags: wb

  - name: InfluxDB server
    hosts: influxdb_servers
    roles:
      - influxdb
      - influxdb_exporter
    tags: if

  - name: Pinger server
    hosts: pinger_servers
    roles:
      - pinger
    tags: pg

  - name: Keepalived
    hosts: keepalived_servers
    roles:
      - keepalived
    tags: ka
